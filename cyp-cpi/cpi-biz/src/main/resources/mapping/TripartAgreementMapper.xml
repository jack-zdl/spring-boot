<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ceying.chx.cpi.biz.rm.agreement.dao.TripartiteAgreementDao">
  <resultMap id="BaseResultMap" type="com.ceying.chx.cpi.biz.rm.agreement.entity.TripartiteAgreement">
    <id column="URID" jdbcType="VARCHAR" property="urid" />
    <result column="TENANTID" jdbcType="DECIMAL" property="tenantid" />
    <result column="TATEMPLATEID" jdbcType="VARCHAR" property="tatemplateid" />
    <result column="ACCOUNTSPAYABLEID" jdbcType="VARCHAR" property="accountspayableid" />
    <result column="TACONTRACTID" jdbcType="VARCHAR" property="tacontractid" />
    <result column="BANKID" jdbcType="VARCHAR" property="bankid" />
    <result column="CORECOMPANYID" jdbcType="VARCHAR" property="corecompanyid" />
    <result column="SUPPLIERID" jdbcType="VARCHAR" property="supplierid" />
    <result column="SUPPLIERACCOUNTID" jdbcType="VARCHAR" property="supplieraccountid" />
    <result column="FINANCINGAMOUNT" jdbcType="FLOAT" property="financingamount" />
    <result column="FINANCINGDATE" jdbcType="TIMESTAMP" property="financingdate" />
    <result column="ISRECOURSE" jdbcType="VARCHAR" property="isrecourse" />
    <result column="INTERESTRATE" jdbcType="FLOAT" property="interestrate" />
    <result column="LENDINGDATE" jdbcType="TIMESTAMP" property="lendingdate" />
    <result column="RETURNDATE" jdbcType="TIMESTAMP" property="returndate" />
    <result column="SUPPLIERRATE" jdbcType="FLOAT" property="supplierrate" />
    <result column="CORECOMPANYRATE" jdbcType="FLOAT" property="corecompanyrate" />
    <result column="ISACTIVE" jdbcType="CHAR" property="isactive" />
    <result column="CREATEDBY" jdbcType="VARCHAR" property="createdby" />
    <result column="CREATEDON" jdbcType="TIMESTAMP" property="createdon" />
    <result column="LASTMODIFIEDBY" jdbcType="VARCHAR" property="lastmodifiedby" />
    <result column="LASTMODIFIEDON" jdbcType="TIMESTAMP" property="lastmodifiedon" />
    <result column="ROWVERSION" jdbcType="DECIMAL" property="rowversion" />
    <result column="DESCRIPTION" jdbcType="VARCHAR" property="description" />
    <result column="SUPPLASTOPERATEFLAG" jdbcType="VARCHAR" property="supplastoperateflag" />
    <result column="CORELASTOPERATEFLAG" jdbcType="VARCHAR" property="corelastoperateflag" />
    <result column="BANKLASTOPERATEFLAG" jdbcType="VARCHAR" property="banklastoperateflag" />
    <result column="APPROVESTATE" jdbcType="VARCHAR" property="approvestate" />
    <result column="ESTIMATERETURNDATE" jdbcType="TIMESTAMP" property="estimatereturndate" />
    <result column="ACCOUNTSPAYABLEQUOTEID" jdbcType="VARCHAR" property="accountspayablequoteid" />
    <result column="LENDINGAFTERFLAG" jdbcType="VARCHAR" property="lendingafterflag" />
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.ceying.chx.cpi.biz.rm.agreement.entity.TripartiteAgreement">
    <result column="SIGNATURECONTENT" jdbcType="BLOB" property="signaturecontent" />
  </resultMap>
  <sql id="Base_Column_List">
    URID, TENANTID, TATEMPLATEID, ACCOUNTSPAYABLEID, TACONTRACTID, BANKID, CORECOMPANYID,
    SUPPLIERID, SUPPLIERACCOUNTID, FINANCINGAMOUNT, FINANCINGDATE, ISRECOURSE, INTERESTRATE,
    LENDINGDATE, RETURNDATE, SUPPLIERRATE, CORECOMPANYRATE, ISACTIVE, CREATEDBY, CREATEDON,
    LASTMODIFIEDBY, LASTMODIFIEDON, ROWVERSION, DESCRIPTION, SUPPLASTOPERATEFLAG, CORELASTOPERATEFLAG,
    BANKLASTOPERATEFLAG, APPROVESTATE, ESTIMATERETURNDATE, ACCOUNTSPAYABLEQUOTEID, LENDINGAFTERFLAG
  </sql>
  <sql id="Blob_Column_List">
    SIGNATURECONTENT
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="ResultMapWithBLOBs">
    select
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from T_TRIPARTITEAGREEMENT
    where URID = #{urid,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    delete from T_TRIPARTITEAGREEMENT
    where URID = #{urid,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.ceying.chx.cpi.biz.rm.agreement.entity.TripartiteAgreement">
    insert into T_TRIPARTITEAGREEMENT (URID, TENANTID, TATEMPLATEID,
      ACCOUNTSPAYABLEID, TACONTRACTID, BANKID,
      CORECOMPANYID, SUPPLIERID, SUPPLIERACCOUNTID,
      FINANCINGAMOUNT, FINANCINGDATE, ISRECOURSE,
      INTERESTRATE, LENDINGDATE, RETURNDATE,
      SUPPLIERRATE, CORECOMPANYRATE, ISACTIVE,
      CREATEDBY, CREATEDON, LASTMODIFIEDBY,
      LASTMODIFIEDON, ROWVERSION, DESCRIPTION,
      SUPPLASTOPERATEFLAG, CORELASTOPERATEFLAG,
      BANKLASTOPERATEFLAG, APPROVESTATE, ESTIMATERETURNDATE,
      ACCOUNTSPAYABLEQUOTEID, LENDINGAFTERFLAG,
      SIGNATURECONTENT)
    values (#{urid,jdbcType=VARCHAR}, #{tenantid,jdbcType=DECIMAL}, #{tatemplateid,jdbcType=VARCHAR},
      #{accountspayableid,jdbcType=VARCHAR}, #{tacontractid,jdbcType=VARCHAR}, #{bankid,jdbcType=VARCHAR},
      #{corecompanyid,jdbcType=VARCHAR}, #{supplierid,jdbcType=VARCHAR}, #{supplieraccountid,jdbcType=VARCHAR},
      #{financingamount,jdbcType=FLOAT}, #{financingdate,jdbcType=TIMESTAMP}, #{isrecourse,jdbcType=VARCHAR},
      #{interestrate,jdbcType=FLOAT}, #{lendingdate,jdbcType=TIMESTAMP}, #{returndate,jdbcType=TIMESTAMP},
      #{supplierrate,jdbcType=FLOAT}, #{corecompanyrate,jdbcType=FLOAT}, #{isactive,jdbcType=CHAR},
      #{createdby,jdbcType=VARCHAR}, #{createdon,jdbcType=TIMESTAMP}, #{lastmodifiedby,jdbcType=VARCHAR},
      #{lastmodifiedon,jdbcType=TIMESTAMP}, #{rowversion,jdbcType=DECIMAL}, #{description,jdbcType=VARCHAR},
      #{supplastoperateflag,jdbcType=VARCHAR}, #{corelastoperateflag,jdbcType=VARCHAR},
      #{banklastoperateflag,jdbcType=VARCHAR}, #{approvestate,jdbcType=VARCHAR}, #{estimatereturndate,jdbcType=TIMESTAMP},
      #{accountspayablequoteid,jdbcType=VARCHAR}, #{lendingafterflag,jdbcType=VARCHAR},
      #{signaturecontent,jdbcType=BLOB})
  </insert>
  <insert id="insertSelective" parameterType="com.ceying.chx.cpi.biz.rm.agreement.entity.TripartiteAgreement">
    insert into T_TRIPARTITEAGREEMENT
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="urid != null">
        URID,
      </if>
      <if test="tenantid != null">
        TENANTID,
      </if>
      <if test="tatemplateid != null">
        TATEMPLATEID,
      </if>
      <if test="accountspayableid != null">
        ACCOUNTSPAYABLEID,
      </if>
      <if test="tacontractid != null">
        TACONTRACTID,
      </if>
      <if test="bankid != null">
        BANKID,
      </if>
      <if test="corecompanyid != null">
        CORECOMPANYID,
      </if>
      <if test="supplierid != null">
        SUPPLIERID,
      </if>
      <if test="supplieraccountid != null">
        SUPPLIERACCOUNTID,
      </if>
      <if test="financingamount != null">
        FINANCINGAMOUNT,
      </if>
      <if test="financingdate != null">
        FINANCINGDATE,
      </if>
      <if test="isrecourse != null">
        ISRECOURSE,
      </if>
      <if test="interestrate != null">
        INTERESTRATE,
      </if>
      <if test="lendingdate != null">
        LENDINGDATE,
      </if>
      <if test="returndate != null">
        RETURNDATE,
      </if>
      <if test="supplierrate != null">
        SUPPLIERRATE,
      </if>
      <if test="corecompanyrate != null">
        CORECOMPANYRATE,
      </if>
      <if test="isactive != null">
        ISACTIVE,
      </if>
      <if test="createdby != null">
        CREATEDBY,
      </if>
      <if test="createdon != null">
        CREATEDON,
      </if>
      <if test="lastmodifiedby != null">
        LASTMODIFIEDBY,
      </if>
      <if test="lastmodifiedon != null">
        LASTMODIFIEDON,
      </if>
      <if test="rowversion != null">
        ROWVERSION,
      </if>
      <if test="description != null">
        DESCRIPTION,
      </if>
      <if test="supplastoperateflag != null">
        SUPPLASTOPERATEFLAG,
      </if>
      <if test="corelastoperateflag != null">
        CORELASTOPERATEFLAG,
      </if>
      <if test="banklastoperateflag != null">
        BANKLASTOPERATEFLAG,
      </if>
      <if test="approvestate != null">
        APPROVESTATE,
      </if>
      <if test="estimatereturndate != null">
        ESTIMATERETURNDATE,
      </if>
      <if test="accountspayablequoteid != null">
        ACCOUNTSPAYABLEQUOTEID,
      </if>
      <if test="lendingafterflag != null">
        LENDINGAFTERFLAG,
      </if>
      <if test="signaturecontent != null">
        SIGNATURECONTENT,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="urid != null">
        #{urid,jdbcType=VARCHAR},
      </if>
      <if test="tenantid != null">
        #{tenantid,jdbcType=DECIMAL},
      </if>
      <if test="tatemplateid != null">
        #{tatemplateid,jdbcType=VARCHAR},
      </if>
      <if test="accountspayableid != null">
        #{accountspayableid,jdbcType=VARCHAR},
      </if>
      <if test="tacontractid != null">
        #{tacontractid,jdbcType=VARCHAR},
      </if>
      <if test="bankid != null">
        #{bankid,jdbcType=VARCHAR},
      </if>
      <if test="corecompanyid != null">
        #{corecompanyid,jdbcType=VARCHAR},
      </if>
      <if test="supplierid != null">
        #{supplierid,jdbcType=VARCHAR},
      </if>
      <if test="supplieraccountid != null">
        #{supplieraccountid,jdbcType=VARCHAR},
      </if>
      <if test="financingamount != null">
        #{financingamount,jdbcType=FLOAT},
      </if>
      <if test="financingdate != null">
        #{financingdate,jdbcType=TIMESTAMP},
      </if>
      <if test="isrecourse != null">
        #{isrecourse,jdbcType=VARCHAR},
      </if>
      <if test="interestrate != null">
        #{interestrate,jdbcType=FLOAT},
      </if>
      <if test="lendingdate != null">
        #{lendingdate,jdbcType=TIMESTAMP},
      </if>
      <if test="returndate != null">
        #{returndate,jdbcType=TIMESTAMP},
      </if>
      <if test="supplierrate != null">
        #{supplierrate,jdbcType=FLOAT},
      </if>
      <if test="corecompanyrate != null">
        #{corecompanyrate,jdbcType=FLOAT},
      </if>
      <if test="isactive != null">
        #{isactive,jdbcType=CHAR},
      </if>
      <if test="createdby != null">
        #{createdby,jdbcType=VARCHAR},
      </if>
      <if test="createdon != null">
        #{createdon,jdbcType=TIMESTAMP},
      </if>
      <if test="lastmodifiedby != null">
        #{lastmodifiedby,jdbcType=VARCHAR},
      </if>
      <if test="lastmodifiedon != null">
        #{lastmodifiedon,jdbcType=TIMESTAMP},
      </if>
      <if test="rowversion != null">
        #{rowversion,jdbcType=DECIMAL},
      </if>
      <if test="description != null">
        #{description,jdbcType=VARCHAR},
      </if>
      <if test="supplastoperateflag != null">
        #{supplastoperateflag,jdbcType=VARCHAR},
      </if>
      <if test="corelastoperateflag != null">
        #{corelastoperateflag,jdbcType=VARCHAR},
      </if>
      <if test="banklastoperateflag != null">
        #{banklastoperateflag,jdbcType=VARCHAR},
      </if>
      <if test="approvestate != null">
        #{approvestate,jdbcType=VARCHAR},
      </if>
      <if test="estimatereturndate != null">
        #{estimatereturndate,jdbcType=TIMESTAMP},
      </if>
      <if test="accountspayablequoteid != null">
        #{accountspayablequoteid,jdbcType=VARCHAR},
      </if>
      <if test="lendingafterflag != null">
        #{lendingafterflag,jdbcType=VARCHAR},
      </if>
      <if test="signaturecontent != null">
        #{signaturecontent,jdbcType=BLOB},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.ceying.chx.cpi.biz.rm.agreement.entity.TripartiteAgreement">
    update T_TRIPARTITEAGREEMENT
    <set>
      <if test="tenantid != null">
        TENANTID = #{tenantid,jdbcType=DECIMAL},
      </if>
      <if test="tatemplateid != null">
        TATEMPLATEID = #{tatemplateid,jdbcType=VARCHAR},
      </if>
      <if test="accountspayableid != null">
        ACCOUNTSPAYABLEID = #{accountspayableid,jdbcType=VARCHAR},
      </if>
      <if test="tacontractid != null">
        TACONTRACTID = #{tacontractid,jdbcType=VARCHAR},
      </if>
      <if test="bankid != null">
        BANKID = #{bankid,jdbcType=VARCHAR},
      </if>
      <if test="corecompanyid != null">
        CORECOMPANYID = #{corecompanyid,jdbcType=VARCHAR},
      </if>
      <if test="supplierid != null">
        SUPPLIERID = #{supplierid,jdbcType=VARCHAR},
      </if>
      <if test="supplieraccountid != null">
        SUPPLIERACCOUNTID = #{supplieraccountid,jdbcType=VARCHAR},
      </if>
      <if test="financingamount != null">
        FINANCINGAMOUNT = #{financingamount,jdbcType=FLOAT},
      </if>
      <if test="financingdate != null">
        FINANCINGDATE = #{financingdate,jdbcType=TIMESTAMP},
      </if>
      <if test="isrecourse != null">
        ISRECOURSE = #{isrecourse,jdbcType=VARCHAR},
      </if>
      <if test="interestrate != null">
        INTERESTRATE = #{interestrate,jdbcType=FLOAT},
      </if>
      <if test="lendingdate != null">
        LENDINGDATE = #{lendingdate,jdbcType=TIMESTAMP},
      </if>
      <if test="returndate != null">
        RETURNDATE = #{returndate,jdbcType=TIMESTAMP},
      </if>
      <if test="supplierrate != null">
        SUPPLIERRATE = #{supplierrate,jdbcType=FLOAT},
      </if>
      <if test="corecompanyrate != null">
        CORECOMPANYRATE = #{corecompanyrate,jdbcType=FLOAT},
      </if>
      <if test="isactive != null">
        ISACTIVE = #{isactive,jdbcType=CHAR},
      </if>
      <if test="createdby != null">
        CREATEDBY = #{createdby,jdbcType=VARCHAR},
      </if>
      <if test="createdon != null">
        CREATEDON = #{createdon,jdbcType=TIMESTAMP},
      </if>
      <if test="lastmodifiedby != null">
        LASTMODIFIEDBY = #{lastmodifiedby,jdbcType=VARCHAR},
      </if>
      <if test="lastmodifiedon != null">
        LASTMODIFIEDON = #{lastmodifiedon,jdbcType=TIMESTAMP},
      </if>
      <if test="rowversion != null">
        ROWVERSION = #{rowversion,jdbcType=DECIMAL},
      </if>
      <if test="description != null">
        DESCRIPTION = #{description,jdbcType=VARCHAR},
      </if>
      <if test="supplastoperateflag != null">
        SUPPLASTOPERATEFLAG = #{supplastoperateflag,jdbcType=VARCHAR},
      </if>
      <if test="corelastoperateflag != null">
        CORELASTOPERATEFLAG = #{corelastoperateflag,jdbcType=VARCHAR},
      </if>
      <if test="banklastoperateflag != null">
        BANKLASTOPERATEFLAG = #{banklastoperateflag,jdbcType=VARCHAR},
      </if>
      <if test="approvestate != null">
        APPROVESTATE = #{approvestate,jdbcType=VARCHAR},
      </if>
      <if test="estimatereturndate != null">
        ESTIMATERETURNDATE = #{estimatereturndate,jdbcType=TIMESTAMP},
      </if>
      <if test="accountspayablequoteid != null">
        ACCOUNTSPAYABLEQUOTEID = #{accountspayablequoteid,jdbcType=VARCHAR},
      </if>
      <if test="lendingafterflag != null">
        LENDINGAFTERFLAG = #{lendingafterflag,jdbcType=VARCHAR},
      </if>
      <if test="signaturecontent != null">
        SIGNATURECONTENT = #{signaturecontent,jdbcType=BLOB},
      </if>
    </set>
    where URID = #{urid,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.ceying.chx.cpi.biz.rm.agreement.entity.TripartiteAgreement">
    update T_TRIPARTITEAGREEMENT
    set TENANTID = #{tenantid,jdbcType=DECIMAL},
      TATEMPLATEID = #{tatemplateid,jdbcType=VARCHAR},
      ACCOUNTSPAYABLEID = #{accountspayableid,jdbcType=VARCHAR},
      TACONTRACTID = #{tacontractid,jdbcType=VARCHAR},
      BANKID = #{bankid,jdbcType=VARCHAR},
      CORECOMPANYID = #{corecompanyid,jdbcType=VARCHAR},
      SUPPLIERID = #{supplierid,jdbcType=VARCHAR},
      SUPPLIERACCOUNTID = #{supplieraccountid,jdbcType=VARCHAR},
      FINANCINGAMOUNT = #{financingamount,jdbcType=FLOAT},
      FINANCINGDATE = #{financingdate,jdbcType=TIMESTAMP},
      ISRECOURSE = #{isrecourse,jdbcType=VARCHAR},
      INTERESTRATE = #{interestrate,jdbcType=FLOAT},
      LENDINGDATE = #{lendingdate,jdbcType=TIMESTAMP},
      RETURNDATE = #{returndate,jdbcType=TIMESTAMP},
      SUPPLIERRATE = #{supplierrate,jdbcType=FLOAT},
      CORECOMPANYRATE = #{corecompanyrate,jdbcType=FLOAT},
      ISACTIVE = #{isactive,jdbcType=CHAR},
      CREATEDBY = #{createdby,jdbcType=VARCHAR},
      CREATEDON = #{createdon,jdbcType=TIMESTAMP},
      LASTMODIFIEDBY = #{lastmodifiedby,jdbcType=VARCHAR},
      LASTMODIFIEDON = #{lastmodifiedon,jdbcType=TIMESTAMP},
      ROWVERSION = #{rowversion,jdbcType=DECIMAL},
      DESCRIPTION = #{description,jdbcType=VARCHAR},
      SUPPLASTOPERATEFLAG = #{supplastoperateflag,jdbcType=VARCHAR},
      CORELASTOPERATEFLAG = #{corelastoperateflag,jdbcType=VARCHAR},
      BANKLASTOPERATEFLAG = #{banklastoperateflag,jdbcType=VARCHAR},
      APPROVESTATE = #{approvestate,jdbcType=VARCHAR},
      ESTIMATERETURNDATE = #{estimatereturndate,jdbcType=TIMESTAMP},
      ACCOUNTSPAYABLEQUOTEID = #{accountspayablequoteid,jdbcType=VARCHAR},
      LENDINGAFTERFLAG = #{lendingafterflag,jdbcType=VARCHAR},
      SIGNATURECONTENT = #{signaturecontent,jdbcType=BLOB}
    where URID = #{urid,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ceying.chx.cpi.biz.rm.agreement.entity.TripartiteAgreement">
    update T_TRIPARTITEAGREEMENT
    set TENANTID = #{tenantid,jdbcType=DECIMAL},
      TATEMPLATEID = #{tatemplateid,jdbcType=VARCHAR},
      ACCOUNTSPAYABLEID = #{accountspayableid,jdbcType=VARCHAR},
      TACONTRACTID = #{tacontractid,jdbcType=VARCHAR},
      BANKID = #{bankid,jdbcType=VARCHAR},
      CORECOMPANYID = #{corecompanyid,jdbcType=VARCHAR},
      SUPPLIERID = #{supplierid,jdbcType=VARCHAR},
      SUPPLIERACCOUNTID = #{supplieraccountid,jdbcType=VARCHAR},
      FINANCINGAMOUNT = #{financingamount,jdbcType=FLOAT},
      FINANCINGDATE = #{financingdate,jdbcType=TIMESTAMP},
      ISRECOURSE = #{isrecourse,jdbcType=VARCHAR},
      INTERESTRATE = #{interestrate,jdbcType=FLOAT},
      LENDINGDATE = #{lendingdate,jdbcType=TIMESTAMP},
      RETURNDATE = #{returndate,jdbcType=TIMESTAMP},
      SUPPLIERRATE = #{supplierrate,jdbcType=FLOAT},
      CORECOMPANYRATE = #{corecompanyrate,jdbcType=FLOAT},
      ISACTIVE = #{isactive,jdbcType=CHAR},
      CREATEDBY = #{createdby,jdbcType=VARCHAR},
      CREATEDON = #{createdon,jdbcType=TIMESTAMP},
      LASTMODIFIEDBY = #{lastmodifiedby,jdbcType=VARCHAR},
      LASTMODIFIEDON = #{lastmodifiedon,jdbcType=TIMESTAMP},
      ROWVERSION = #{rowversion,jdbcType=DECIMAL},
      DESCRIPTION = #{description,jdbcType=VARCHAR},
      SUPPLASTOPERATEFLAG = #{supplastoperateflag,jdbcType=VARCHAR},
      CORELASTOPERATEFLAG = #{corelastoperateflag,jdbcType=VARCHAR},
      BANKLASTOPERATEFLAG = #{banklastoperateflag,jdbcType=VARCHAR},
      APPROVESTATE = #{approvestate,jdbcType=VARCHAR},
      ESTIMATERETURNDATE = #{estimatereturndate,jdbcType=TIMESTAMP},
      ACCOUNTSPAYABLEQUOTEID = #{accountspayablequoteid,jdbcType=VARCHAR},
      LENDINGAFTERFLAG = #{lendingafterflag,jdbcType=VARCHAR}
    where URID = #{urid,jdbcType=VARCHAR}
  </update>

    <select id="list" resultMap="BaseResultMap">
        select * from (
        select a.*,rownum n from
        ( select t.urid,
        t.accountspayableid,
        t.tatemplateid,
        o.ORG_NAME as bankid,
        o1.ORG_NAME as corecompanyid,
        o2.ORG_NAME as supplierid,
        a.invoicenumber,
        a.contractid,
        t.financingamount,
        a.payableno,
        a.amount,
        d.C_CAPTION as supplastoperateflag,
        d1.C_CAPTION as corelastoperateflag,
        d2.C_CAPTION as banklastoperateflag,
        t.lendingdate,
        t.returndate,
        tacontractid,
        t.estimatereturndate,
        t.signaturecontent,
        t.isrecourse,
        t.interestrate
        from t_tripartiteagreement t, t_accountspayable a,tsys_organization o,tsys_organization o1,tsys_organization o2,TDICTIONARY d,TDICTIONARY d1,TDICTIONARY d2
        where  t.isactive = '1'
        and t.accountspayableid = a.urid
        and t.BANKID = o.ORG_ID
        and t.CORECOMPANYID = o1.ORG_ID
        and t.SUPPLIERID = o2.ORG_ID
        and d.L_KEYNO = '9999066'
        and d1.L_KEYNO = '9999066'
        and d2.L_KEYNO = '9999066'
        and t.supplastoperateflag = d.C_KEYVALUE
        and t.corelastoperateflag = d1.C_KEYVALUE
        and t.banklastoperateflag = d2.C_KEYVALUE
        and t.approvestate in ('1', '3')
        and ((t.supplastoperateflag = '103' and t.corelastoperateflag = '203' and
        t.banklastoperateflag = '303') or
        ( t.supplastoperateflag not in
        ('101', '102', '103', '9999', '9101', '9102') and
        t.corelastoperateflag not in ('', '201', '202', '9999') and
        t.banklastoperateflag not in ('', '301', '302', '9999')))
        <if test="payableno != null and payableno!=''">
            and a.payableno = #{payableno,jdbcType=VARCHAR}
        </if>
        <if test="financingamount != null and financingamount!=''">
            and t.financingamount like concat(concat('%',#{financingamount}),'%')
        </if>
        <if test="contractid != null and contractid!=''">
            and a.contractid = #{contractid,jdbcType=VARCHAR}
        </if>
        <if test="estimatereturndate != null and estimatereturndate!=''">
            and t.estimatereturndate = to_date(#{estimatereturndate,jdbcType=VARCHAR},'yyyy/MM/dd')
        </if>
        <if test="invoicenumber != null and invoicenumber!=''">
            and a.invoicenumber = #{invoicenumber,jdbcType=VARCHAR}
        </if>
        <if test="bankid != null and bankid!=''">
            and o.ORG_NAME like concat(concat('%',#{bankid}),'%')
        </if>
        <if test="supplierid != null and supplierid!=''">
            and o2.ORG_NAME like concat(concat('%',#{supplierid}),'%')
        </if>
        <if test="corecompanyid != null and corecompanyid!=''">
            and o1.ORG_NAME like concat(concat('%',#{corecompanyid}),'%')
        </if>
        ORDER BY t.CREATEDON desc)
        a
        where 1=1 and rownum<![CDATA[ <= ]]> #{rows} * #{page}
        )
        where n <![CDATA[ > ]]>(#{page} - 1) * #{rows}
    </select>
    <select id="listCount" resultType="java.lang.Integer">
        select count(*)
        from t_tripartiteagreement t, t_accountspayable a,tsys_organization o,tsys_organization o1,tsys_organization o2,TDICTIONARY d,TDICTIONARY d1,TDICTIONARY d2
        where  t.isactive = '1'
        and t.accountspayableid = a.urid
        and t.BANKID = o.ORG_ID
        and t.CORECOMPANYID = o1.ORG_ID
        and t.SUPPLIERID = o2.ORG_ID
        and d.L_KEYNO = '9999066'
        and d1.L_KEYNO = '9999066'
        and d2.L_KEYNO = '9999066'
        and t.supplastoperateflag = d.C_KEYVALUE
        and t.corelastoperateflag = d1.C_KEYVALUE
        and t.banklastoperateflag = d2.C_KEYVALUE
        and t.approvestate in ('1', '3')
        and ((t.supplastoperateflag = '103' and t.corelastoperateflag = '203' and
        t.banklastoperateflag = '303') or
        ( t.supplastoperateflag not in
        ('101', '102', '103', '9999', '9101', '9102') and
        t.corelastoperateflag not in ('', '201', '202', '9999') and
        t.banklastoperateflag not in ('', '301', '302', '9999')))
        <if test="payableno != null and payableno!=''">
            and a.payableno = #{payableno,jdbcType=VARCHAR}
        </if>
        <if test="financingamount != null and financingamount!=''">
            and t.financingamount like concat(concat('%',#{financingamount}),'%')
        </if>
        <if test="contractid != null and contractid!=''">
            and a.contractid = #{contractid,jdbcType=VARCHAR}
        </if>
        <if test="estimatereturndate != null and estimatereturndate!=''">
            and t.estimatereturndate = to_date(#{estimatereturndate,jdbcType=VARCHAR},'yyyy/MM/dd')
        </if>
        <if test="invoicenumber != null and invoicenumber!=''">
            and a.invoicenumber = #{invoicenumber,jdbcType=VARCHAR}
        </if>
        <if test="bankid != null and bankid!=''">
            and o.ORG_NAME like concat(concat('%',#{bankid}),'%')
        </if>
        <if test="supplierid != null and supplierid!=''">
            and o2.ORG_NAME like concat(concat('%',#{supplierid}),'%')
        </if>
        <if test="corecompanyid != null and corecompanyid!=''">
            and o1.ORG_NAME like concat(concat('%',#{corecompanyid}),'%')
        </if>
        ORDER BY t.CREATEDON desc
    </select>
</mapper>